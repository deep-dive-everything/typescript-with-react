# 타입스크립트 컴파일


- 컴파일 타임 : 컴파일러에 의해 사람이 이해하기 쉽게 작성된 소스코드가 기계가 이해할 수 있는 기계어 코드로 변환되어 실행이 가능한 프로그램으로 변환
- 런타임 : 컴파일이 완료된 프로그램이 메모리에 적재되어 실행되는 것

### 자바스크립트의 런타임

- 자바스크립트가 실행되는 환경
- 인터넷 브라우저, Node.js
    - 구성 요소 : 자바스크립트 엔진, 웹 API, 콜백 큐, 이벤트 루프, 렌더 큐

### 타입 스크립트의 컴파일

- tsc라는 컴파일러를 통해 타입 스크립트에서 자바스크립트로 변환
    - 고수준 언어에서 고수준 언어으로 변환이기 때문에 트랜스 파일이라 불리기도 함
    - 소스코드를 다른 소스코드로 변환하기에 컴파일러는 소스 대 소스 컴파일러라고 지칭
- tsc가 소스 코드 컴파일 및 런타임 과정
    1. TS 소스 코드 타입 스크립트 AST로 생성 (tsc)
    2. 타입 검사기가 AST를 확인하여 타입 확인 (tsc)
    3. TS 소스 코드 → JS 소스 코드 (tsc)
        1. **심각한 에러 발생 시 , 컴파일 중단 (정적 타입 언어로 불리는 이유)**
            1. 필수적인 타입 정보 누락
            2. 타입 불일치가 명확한 경우
            3. 구문 오류
            4. 모듈 해석 오류
    4. 자바스크립트 AST 생성 (런타임)
    5. AST ⇒ 바이트 코드 (런타임)
    6. 프로그램 실행 (런타임)

### 타입 스크립트 컴파일러 동적

- 코드 검사기 : 코드에 오류가 없는 지 확인 (문법 에러 및 타입 관련 에러 검출)
- 코드 변환기 : 타입 검사 후, 각자의 런타임 환경에서 동작할 수 있도록 구버전의 자바스크립트로 트랜스파일
    - 타입 검사 후, 코드 변환을 시작하기 때문에 타입 오류가 있어도 일단 컴파일을 진행하고 이후 런타임 에러로 처리 ⇒ 완전한 정적언어라고 할 수 없는 이유
    - vs 바벨 : 바벨은 타입 검사를 하지 않고, 최신 버전의 JS 코드를 낮은 버전으로 컴파일

### 타입 스크립트 컴파일러의 구조

1. 프로그램 
    1. tsc 명령어로 실행
2. 스캐너
    1. 소스코드를 작은 단위로 나누어 의미있는 토큰으로 변환
3. 파서
    1. 스캐너에서 생성된 토큰 이용하여 AST 생성하여 구문적 분석 수행
        1. 코드 상의 위치, 구문 종류, 코드 내용
4. 바인더
    1. 타입 검사를 위한 기반 마련
    2. 심볼 생성 (파서가 생성한 AST에서 선언된 타입의 노드 정보 저장)
5. 체커
    1. AST 노드를 탐색하며 심볼 정보를 기반으로 소스 파일에 대한 타입 검사 수행하여 에러 메시지 저장
6. 이미터
    1. **컴파일을 진행할 지 말지 결정 (타입 검사가 체커 단계에서 수행되지만**, **타입 검사 결과가 실제로 컴파일 중단 여부에 영향을 미치는 것은 이미터 단계에서 결정)**
    2. 체커 단계에서 에러가 없다면 자바 스크립트 소스파일 변환
